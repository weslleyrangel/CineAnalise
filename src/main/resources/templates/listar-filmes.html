<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>CineAnálise - Lista de Filmes</title>

        <script src="https://cdn.tailwindcss.com"></script>

        <link rel="stylesheet" th:href="@{/css/styles.css}">
    </head>
    <body class="antialiased">

        <div class="container mx-auto p-4 md:p-8 max-w-4xl">

            <header class="mb-8 text-center">
                <h1 class="text-5xl">CineAnálise 95</h1>
                <p class="text-xl mt-2">Seu diário de filmes para o século XX.</p>
                <button id="theme-toggle" class="mt-4">
                    Dark Mode
                </button>
            </header>

            <main class="window">
                <div class="title-bar">Filmes Cadastrados</div>

                <div class="flex justify-end mb-6">
                    <a th:href="@{/filmes/novo}" class="button">➕ Cadastrar Novo Filme</a>
                </div>

                <div th:if="${#lists.isEmpty(filmes)}" class="text-center p-8">
                    <p class="text-xl mb-4">📽️ Nenhum filme cadastrado ainda.</p>
                    <p>Comece adicionando seu primeiro filme!</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div th:each="filme : ${filmes}" class="window !p-3 filme-card">
                        <a th:href="@{/filmes/{id}(id=${filme.id})}">
                            <h3 class="text-xl font-bold" th:text="${filme.titulo + ' (' + filme.ano + ')'}"></h3>
                            <p class="text-sm mb-2" th:text="${filme.genero}"></p>
                            <p th:text="${#strings.abbreviate(filme.sinopse, 100)}"></p>
                        </a>

                        <div class="filme-actions">
                            <a th:href="@{/filmes/{id}(id=${filme.id})}" class="button flex-1 text-center">
                                👁️ Ver Detalhes
                            </a>
                            <a th:href="@{/filmes/editar/{id}(id=${filme.id})}" class="button button-warning">
                                ✏️ Editar
                            </a>
                            <form th:action="@{/filmes/deletar/{id}(id=${filme.id})}" method="post" style="display: inline;">
                                <button type="submit" class="button button-danger">
                                    🗑️ Deletar
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <script th:src="@{/js/DarkMode.js}"></script>
        <script th:src="@{/js/form-validation.js}"></script>
    </body>
</html>