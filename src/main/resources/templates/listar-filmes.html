<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>CineAn√°lise - Lista de Filmes</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
        <style>
            body {
                font-family: 'VT323', monospace;
                background-color: #C0C0C0;
                color: #000;
            }
            .window {
                background-color: #C0C0C0;
                border: 2px outset #fff;
                box-shadow: 2px 2px 0px #000;
                padding: 1rem;
            }
            .title-bar {
                background-color: #000080;
                color: #fff;
                padding: 4px 8px;
                font-size: 1.25rem;
                margin-bottom: 1rem;
            }
            .button {
                background-color: #C0C0C0;
                border: 2px outset #fff;
                box-shadow: 1px 1px 0px #000;
                padding: 0.5rem 1rem;
                font-size: 1.1rem;
                cursor: pointer;
                text-decoration: none;
                display: inline-block;
                color: #000;
            }
            .button:active {
                border-style: inset;
            }
            .button-danger {
                background-color: #C00000;
                color: #fff;
            }
            .button-warning {
                background-color: #FFA500;
                color: #000;
            }
            .filme-card {
                position: relative;
            }
            .filme-actions {
                display: flex;
                gap: 0.5rem;
                margin-top: 0.5rem;
            }
        </style>
    </head>
    <body class="antialiased">

        <div class="container mx-auto p-4 md:p-8 max-w-4xl">
            <header class="mb-8 text-center">
                <h1 class="text-5xl" style="color: #000080;">CineAn√°lise 95</h1>
                <p class="text-xl mt-2">Seu di√°rio de filmes para o s√©culo XX.</p>
                <button id="theme-toggle" class="mt-4 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-black dark:text-white border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
                    Dark Mode
                </button>
            </header>

            <main class="window">
                <div class="title-bar">Filmes Cadastrados</div>
                <div class="flex justify-end mb-6">
                    <a th:href="@{/filmes/novo}" class="button">‚ûï Cadastrar Novo Filme</a>
                </div>

                <div th:if="${#lists.isEmpty(filmes)}" class="text-center p-8">
                    <p class="text-xl mb-4">üìΩÔ∏è Nenhum filme cadastrado ainda.</p>
                    <p>Comece adicionando seu primeiro filme!</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div th:each="filme : ${filmes}" class="window !p-3 filme-card">
                        <a th:href="@{/filmes/{id}(id=${filme.id})}" class="no-underline text-black block">
                            <h3 class="text-xl font-bold" style="color:#000080" th:text="${filme.titulo + ' (' + filme.ano + ')'}"></h3>
                            <p class="text-sm mb-2" th:text="${filme.genero}"></p>
                            <p th:text="${#strings.abbreviate(filme.sinopse, 100)}"></p>
                        </a>

                        <!-- Bot√µes de A√ß√£o -->
                        <div class="filme-actions">
                            <a th:href="@{/filmes/{id}(id=${filme.id})}" class="button flex-1 text-center">
                                üëÅÔ∏è Ver Detalhes
                            </a>
                            <a th:href="@{/filmes/editar/{id}(id=${filme.id})}" class="button button-warning">
                                ‚úèÔ∏è Editar
                            </a>
                            <form th:action="@{/filmes/deletar/{id}(id=${filme.id})}" method="post" style="display: inline;" 
                                  onsubmit="return confirm('Tem certeza que deseja deletar este filme? Todas as an√°lises ser√£o removidas tamb√©m.');">
                                <button type="submit" class="button button-danger">
                                    üóëÔ∏è Deletar
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </main>
        </div>

    </body>
</html>